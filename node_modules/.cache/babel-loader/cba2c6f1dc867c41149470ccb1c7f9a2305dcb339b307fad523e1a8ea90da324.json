{"ast":null,"code":"var _jsxFileName = \"/home/webexpert/Desktop/colin/tes/src/App.tsx\",\n  _s = $RefreshSig$();\n// import { useState, useEffect, ChangeEvent, FormEvent } from \"react\";\n// import \"./AuthForm.css\";\n// import { createUser, getAccessToken, makeSessionToken } from \"./api/api\";\n\n// export default function AuthForm() {\n//   const [tokenForm, setTokenForm] = useState({ client_id: \"\", client_secret: \"\" });\n//   const [userForm, setUserForm] = useState({ username: \"\", email: \"\", plaid_user_id: \"\" });\n//   const [manualWidgetForm, setManualWidgetForm] = useState({ userId: \"\", access_token: \"\", session_token: \"\" });\n\n//   const [userId, setUserId] = useState(\"\");\n//   const [accessToken, setAccessToken] = useState(\"\");\n//   const [sessionToken, setSessionToken] = useState(\"\");\n//   const [copiedField, setCopiedField] = useState<string | null>(null);\n//   const [errors, setErrors] = useState<any>({});\n//   const [widgetError, setWidgetError] = useState<string | null>(null);\n//   const [loading, setLoading] = useState(false);\n//   const [step, setStep] = useState<\"token\" | \"user\" | \"session\" | \"widget\">(\"token\");\n//   const [showClientAuthForm, setShowClientAuthForm] = useState(false);\n//   const [showDirectConnect, setShowDirectConnect] = useState(false);\n\n//   const handleTokenOrUserChange = (e: ChangeEvent<HTMLInputElement>) => {\n//     const { name, value } = e.target;\n//     if (step === \"token\") setTokenForm(prev => ({ ...prev, [name]: value }));\n//     else setUserForm(prev => ({ ...prev, [name]: value }));\n//     setErrors((prev:any) => ({ ...prev, [name]: undefined }));\n//   };\n\n//   const copyToClipboard = (value: string, field: string) => {\n//     navigator.clipboard.writeText(value).then(() => setCopiedField(field));\n//   };\n\n//   const handleSubmit = async (e: FormEvent) => {\n//     e.preventDefault();\n//     setLoading(true);\n//     setWidgetError(null);\n\n//     if (step === \"token\") {\n//       if (!tokenForm.client_id || !tokenForm.client_secret) {\n//         setErrors({\n//           client_id: !tokenForm.client_id ? \"Client ID is required\" : undefined,\n//           client_secret: !tokenForm.client_secret ? \"Client Secret is required\" : undefined,\n//         });\n//         setLoading(false);\n//         return;\n//       }\n//       try {\n//         const res = await getAccessToken(tokenForm.client_id,tokenForm.client_secret)\n//         if (res) {\n//           setAccessToken(res.access_token);\n//           setStep(\"user\");\n//         } \n//         // else setWidgetError(res.error || \"Token fetch failed\");\n//       } catch {\n//         setWidgetError(\"Error fetching token\");\n//       } finally {\n//         setLoading(false);\n//       }\n//     } else if (step === \"user\") {\n//       if (!userForm.username || !userForm.email || !userForm.plaid_user_id) {\n//         setErrors({\n//           username: !userForm.username ? \"Username is required\" : undefined,\n//           email: !userForm.email ? \"Email is required\" : undefined,\n//           plaid_user_id: !userForm.plaid_user_id ? \"Plaid User ID is required\" : undefined,\n//         });\n//         setLoading(false);\n//         return;\n//       }\n//       try {\n//         const res = await createUser({email:userForm.email,username:userForm.username,plaid_user_id:userForm.plaid_user_id},accessToken)\n//         const data = res\n//         console.log(data,\"9087689\")\n//         if (res) {\n//           setUserId(data.user_id);\n//           setStep(\"session\");\n//         } else setWidgetError(data.error || \"User creation failed\");\n//       } catch {\n//         setWidgetError(\"Error creating user\");\n//       } finally {\n//         setLoading(false);\n//       }\n//     } else if (step === \"session\") {\n//       try {\n//         console.log(userId,\"userId\")\n//         const data = await makeSessionToken(userId,accessToken)\n//         // const data = res;\n//         if (data) {\n//           setSessionToken(data.widget_session_token);\n//           setStep(\"widget\");\n//           setShowClientAuthForm(true);\n//         } else {\n//           setErrors({ session: data.error || \"Session creation failed\" });\n//         }\n//       } catch {\n//         setErrors({ session: \"Error creating session\" });\n//       } finally {\n//         setLoading(false);\n//       }\n//     }\n//   };\n\n//   useEffect(() => {\n//     if (!showClientAuthForm) {\n//       document.getElementById(\"widget-script\")?.remove();\n//       document.getElementById(\"widget-style\")?.remove();\n//       document.getElementById(\"widget-container\")?.remove();\n//       return;\n//     }\n//     if (document.getElementById(\"widget-script\")) return;\n\n//     const script = document.createElement(\"script\");\n//     script.type = \"module\";\n//     script.id = \"widget-script\";\n//     script.src = \"http://localhost:5173/widgets/widgetLauncher.js\";\n//     script.async = true;\n//     script.setAttribute(\"data-userid\", userId);\n//     script.setAttribute(\"data-access_token\", accessToken);\n//     script.setAttribute(\"data-session_token\", sessionToken);\n//     document.body.appendChild(script);\n\n//     const link = document.createElement(\"link\");\n//     link.rel = \"stylesheet\";\n//     link.id = \"widget-style\";\n//     link.href = \"http://localhost:5173/widgets/style.css\";\n//     document.head.appendChild(link);\n\n//     return () => {\n//       script.remove();\n//       link.remove();\n//       document.getElementById(\"widget-container\")?.remove();\n//     };\n//   }, [showClientAuthForm, userId, accessToken, sessionToken]);\n\n//   return (\n//     <div className=\"auth-form-container\">\n//       <form onSubmit={handleSubmit} className=\"auth-form\">\n//         {step === \"token\" && (\n//           <>\n//             <h2>Step 1: Get Access Token</h2>\n//             <input name=\"client_id\" placeholder=\"Client ID\" value={tokenForm.client_id} onChange={handleTokenOrUserChange} />\n//             {errors.client_id && <p className=\"error\">{errors.client_id}</p>}\n//             <input name=\"client_secret\" placeholder=\"Client Secret\" value={tokenForm.client_secret} onChange={handleTokenOrUserChange} />\n//             {errors.client_secret && <p className=\"error\">{errors.client_secret}</p>}\n//           </>\n//         )}\n\n//         {step === \"user\" && (\n//           <>\n//             <h2>Step 2: Create User</h2>\n//             <input name=\"username\" placeholder=\"Username\" value={userForm.username} onChange={handleTokenOrUserChange} />\n//             {errors.username && <p className=\"error\">{errors.username}</p>}\n//             <input name=\"email\" placeholder=\"Email\" value={userForm.email} onChange={handleTokenOrUserChange} />\n//             {errors.email && <p className=\"error\">{errors.email}</p>}\n//             <input name=\"plaid_user_id\" placeholder=\"Plaid User ID\" value={userForm.plaid_user_id} onChange={handleTokenOrUserChange} />\n//             {errors.plaid_user_id && <p className=\"error\">{errors.plaid_user_id}</p>}\n//           </>\n//         )}\n\n//         {step === \"session\" && (\n//           <>\n//             <h2>Step 3: Session Created</h2>\n//             <div className=\"info-box\">\n//               <p><strong>User ID:</strong> {userId}</p>\n//               <p><strong>Access Token:</strong> {accessToken}</p>\n//               <p><strong>Session Token:</strong> {sessionToken}</p>\n//               {errors.session && <p className=\"error\">{errors.session}</p>}\n//             </div>\n//           </>\n//         )}\n\n//         {step === \"widget\" && (\n//           <div className=\"widget-loaded-message\">\n//             <h2>Widget Loaded Successfully</h2>\n//             <p>The widget should now be visible on the page.</p>\n//           </div>\n//         )}\n\n//         {step !== \"widget\" && (\n//           <button type=\"submit\" className=\"submit-btn\" disabled={loading}>\n//             {loading ? \"Processing...\" : step === \"session\" ? \"Continue to Widget\" : `Continue to ${step === \"token\" ? \"User Creation\" : \"Session\"}`}\n//           </button>\n//         )}\n//       </form>\n//     </div>\n//   );\n// }\n\n// import React, { useEffect, useState } from \"react\";\n\n// interface Props {\n//   userId: string;\n//   access_token: string;\n//   session_token: string;\n//   onError?: (msg: string) => void;\n// }\n\n// const PotentialDeductions = () => {\n//   const [transactions, setTransactions] = useState<any[]>([]);\n//   const [activeCategoryIndex, setActiveCategoryIndex] = useState<number>(0);\n//   const [isOpen, setIsOpen] = useState(false);\n//   const [loading, setLoading] = useState(false);\n//   const [error, setError] = useState(\"\");\n\n//   const groupByField = (dataArray: any, groupKey: any) => {\n//     if (!Array.isArray(dataArray)) {\n//       throw new Error(\"First argument must be an array\");\n//     }\n\n//     const grouped: any = [];\n\n//     dataArray.forEach((item) => {\n//       const key = item[groupKey] || \"schedule C\";\n//       if (!grouped[key]) {\n//         grouped[key] = [];\n//       }\n//       grouped[key].push(item);\n//     });\n\n//     return grouped;\n//   }\n\n//   const fetchTransactions = async (userId: string) => {\n//     setLoading(true);\n//     try {\n//       const data: any = await fetch(`https://dev-categorization.musetax.com/v2/api/potential-deductions/${userId}`, {\n//         method: \"GET\",\n\n//       }).then(async (data) => {\n//         const data1 = await data.json();\n//         const scheduleData = groupByField(data1.deductions, data1.deductions[0].schedule || 'schedule c')\n//         console.log(scheduleData, \"scheduleData\");\n\n//         setTransactions(scheduleData);\n//         console.log(data1,\n//           'dshjchduv'\n//         )\n\n//       })\n\n//       const raja = await data.json()\n//       const response = data.data.json()\n//       console.log(response, \"wuhdwuk\", raja)\n//       // setTransactions(data.body || []);\n//       // if (data?.detail) {\n//       //   const msg = data.detail;\n//       //   setError(msg);\n//       //   // onError?.(msg);\n//       //  } else {\n\n//       //   setTransactions(data || []);\n//       // }\n//     } catch (error: any) {\n//       const msg = \"Failed to fetch transactions.\";\n//       // setError(msg);\n//       // onError?.(msg);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n//   useEffect(() => {\n//     fetchTransactions('68624589068ff5fea74cf7be')\n//   }, [])\n//   const objectKey:any=Object.keys(transactions)\n//   const activeDeductions = transactions[objectKey[activeCategoryIndex]];\n//   console.log(activeDeductions, \"transactionstransactions\");\n//   let total = 0;\n//  let savings = 0;\n//  if(activeDeductions)   \n// {activeDeductions.forEach((d: any) => {\n//   console.log(d);\n\n//   total += d.total_amount || 0;\n//   savings += d.potential_deduction || 0;\n// });}\n\n//   const label = (total - savings).toFixed(2);\n\n//   return (\n//     <>\n//       <div\n//         style={{\n//           position: \"fixed\",\n//           bottom: \"20px\",\n//           right: \"20px\",\n//           width: \"60px\",\n//           height: \"60px\",\n//           backgroundColor: \"#007bff\",\n//           borderRadius: \"50%\",\n//           display: \"flex\",\n//           justifyContent: \"center\",\n//           alignItems: \"center\",\n//           cursor: \"pointer\",\n//           zIndex: 9999,\n//           color: \"#fff\",\n//           fontSize: \"28px\",\n//           boxShadow: \"0 4px 5px rgba(0, 0, 0, 0.3)\",\n//         }}\n//         onClick={() => setIsOpen(!isOpen)}\n//         title=\"Open Auth Widget\"\n//       >\n//         ðŸ’¬\n//       </div>\n\n//       {isOpen && (\n//         <div\n//           style={{\n//             position: \"fixed\",\n//             bottom: \"90px\",\n//             right: \"20px\",\n//             width: \"68rem\",\n//             maxHeight: \"70vh\",\n//             zIndex: 9998,\n//             overflowY: \"auto\",\n//           }}\n//         >\n//           {error ? (\n//             <div\n//               style={{\n//                 paddingTop: \"200px\",\n//                 minHeight: \"500px\",\n//               }}\n//             >\n//               ''\n//               <p>{error}</p>\n//             </div>\n//           ) : (\n//             <div\n//               style={{\n//                 maxWidth: 1200,\n//                 margin: \"auto\",\n//                 border: \"1px solid #ccc\",\n//                 borderRadius: 16,\n//                 overflow: \"hidden\",\n//               }}\n//             >\n//               <div\n//                 style={{\n//                   backgroundColor: \"#F1F7FB\",\n//                   padding: \"16px 24px\",\n//                   display: \"flex\",\n//                   justifyContent: \"space-between\",\n//                   alignItems: \"center\",\n//                   borderBottom: \"1px solid #BFDBFE\",\n//                 }}\n//               >\n//                 <h2\n//                   style={{\n//                     fontSize: 20,\n//                     fontWeight: 500,\n//                     color: \"#042567\",\n//                     margin: 0,\n//                   }}\n//                 >\n//                   Potential Deductions Analysis\n//                 </h2>\n//                 <span\n//                   style={{\n//                     fontSize: 14,\n//                     color: \"#6B7280\",\n//                     display: \"flex\",\n//                     alignItems: \"center\",\n//                     gap: 4,\n//                   }}\n//                 >\n//                   <span\n//                     style={{\n//                       width: 8,\n//                       height: 8,\n//                       borderRadius: \"50%\",\n//                       backgroundColor: \"#687DF7\",\n//                       display: \"inline-block\",\n//                     }}\n//                   />\n//                   Analysis complete\n//                 </span>\n//               </div>\n\n//               {loading ? (\n//                 <p\n//                   style={{\n//                     fontSize: \"0.875rem\",\n//                     color: \"#526282\",\n//                     margin: 0,\n//                     display: \"flex\",\n//                     justifyContent: \"center\",\n//                     width: \"100%\",\n//                   }}\n//                 >\n//                   Loadingâ€¦\n//                 </p>\n//               ) : (\n//                 <div style={{ padding: 24 }}>\n//                   {/* Tabs */}\n//                   <div style={{ marginBottom: 24, display: \"flex\", gap: 8 }}>\n//                     {Object.keys(transactions).map((cat, index) => (\n//                       <button\n//                         key={index}\n//                         onClick={() => setActiveCategoryIndex(index)}\n//                         style={{\n//                           border: \"1px solid #5387F1\",\n//                           padding: \"12px 16px\",\n//                           fontSize: 14,\n//                           fontWeight: 500,\n//                           borderRadius: 8,\n//                           backgroundColor:\n//                             activeCategoryIndex === index ? \"#5387F1\" : \"white\",\n//                           color:\n//                             activeCategoryIndex === index ? \"white\" : \"#5387F1\",\n//                           cursor: \"pointer\",\n//                         }}\n//                       >\n//                         {cat}\n//                       </button>\n//                     ))}\n//                   </div>\n\n//                   {/* Deduction Details */}\n//                   {activeDeductions.map((activeDeduction: any) => (<>\n//                     <div\n//                       style={{\n//                         border: \"1px solid rgba(30, 64, 175, 0.1)\",\n//                         borderRadius: 16,\n//                         padding: 16,\n//                         margin: \"12px 0\",\n//                       }}\n//                     >\n//                       <h3 style={{ marginBottom: 8, color: \"#042567\" }}>\n//                         {activeDeduction?.title}\n//                       </h3>\n//                       <p style={{ color: \"#526282\", marginBottom: 4 }}>\n//                         {activeDeduction?.description}\n//                       </p>\n//                       <p style={{ color: \"#5A83F3\", fontSize: 12 }}>\n//                         Debit transactions:{\" \"}\n//                         {activeDeduction?.debit_transaction_count}, Credit\n//                         transactions: {activeDeduction?.credit_transaction_count}\n//                       </p>\n//                       <div\n//                         style={{\n//                           marginTop: 16,\n//                           display: \"flex\",\n//                           justifyContent: \"space-between\",\n//                         }}\n//                       >\n//                         <div style={{ fontWeight: 500, color: \"#5A83F3\" }}>\n//                           Total Spent: ${activeDeduction?.total_amount}\n//                         </div>\n//                         <div style={{ fontWeight: 500, color: \"#5387F1\" }}>\n//                           Potential Deduction: $\n//                           {activeDeduction?.potential_deduction}\n//                         </div>\n//                       </div>\n//                     </div>\n//                   </>))}\n\n//                   {/* Individual Transactions (Optional) */}\n//                   <div>\n//                     {/* {activeDeductions?.map((txn: any, i: any) => ( */}\n//                       <div\n//                         // key={i}\n//                         style={{\n//                           borderBottom: \"1px solid #eee\",\n//                           padding: \"12px 0\",\n//                         }}\n//                       >\n//                         <div style={{ fontWeight: 500 }}>\n//                           Total potenial deduction: $${savings}\n//                         </div>\n//                         <div style={{ fontSize: 12, color: \"#666\" }}>\n//                          Total amount: $${total}\n//                         </div>\n//                       </div>\n//                     {/* ))} */}\n//                   </div>\n//                 </div>\n//               )}\n//             </div>\n//           )}\n//         </div>\n//       )}\n//     </>\n//   );\n// };\n\n// export default PotentialDeductions;\n\nimport React, { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AuthForm() {\n  _s();\n  const [showIframe, setShowIframe] = useState(false);\n  const handleClick = () => {\n    setShowIframe(true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleClick,\n      className: \"px-4 py-2 bg-blue-500 text-white rounded\",\n      children: \"Open Iframe\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 7\n    }, this), showIframe && /*#__PURE__*/_jsxDEV(\"iframe\", {\n      src: \"http://localhost:3000/\",\n      width: \"20\",\n      height: \"680\",\n      style: {\n        border: \"none\",\n        overflow: \"hidden\"\n      },\n      allow: \"clipboard-write; microphone; camera\",\n      title: \"My Iframe\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 510,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 501,\n    columnNumber: 5\n  }, this);\n}\n_s(AuthForm, \"E0qW+iP9wF4Jiy5lFYHBRxnaaPw=\");\n_c = AuthForm;\n;\nvar _c;\n$RefreshReg$(_c, \"AuthForm\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","AuthForm","_s","showIframe","setShowIframe","handleClick","children","onClick","className","fileName","_jsxFileName","lineNumber","columnNumber","src","width","height","style","border","overflow","allow","title","_c","$RefreshReg$"],"sources":["/home/webexpert/Desktop/colin/tes/src/App.tsx"],"sourcesContent":["// import { useState, useEffect, ChangeEvent, FormEvent } from \"react\";\n// import \"./AuthForm.css\";\n// import { createUser, getAccessToken, makeSessionToken } from \"./api/api\";\n\n// export default function AuthForm() {\n//   const [tokenForm, setTokenForm] = useState({ client_id: \"\", client_secret: \"\" });\n//   const [userForm, setUserForm] = useState({ username: \"\", email: \"\", plaid_user_id: \"\" });\n//   const [manualWidgetForm, setManualWidgetForm] = useState({ userId: \"\", access_token: \"\", session_token: \"\" });\n\n//   const [userId, setUserId] = useState(\"\");\n//   const [accessToken, setAccessToken] = useState(\"\");\n//   const [sessionToken, setSessionToken] = useState(\"\");\n//   const [copiedField, setCopiedField] = useState<string | null>(null);\n//   const [errors, setErrors] = useState<any>({});\n//   const [widgetError, setWidgetError] = useState<string | null>(null);\n//   const [loading, setLoading] = useState(false);\n//   const [step, setStep] = useState<\"token\" | \"user\" | \"session\" | \"widget\">(\"token\");\n//   const [showClientAuthForm, setShowClientAuthForm] = useState(false);\n//   const [showDirectConnect, setShowDirectConnect] = useState(false);\n\n//   const handleTokenOrUserChange = (e: ChangeEvent<HTMLInputElement>) => {\n//     const { name, value } = e.target;\n//     if (step === \"token\") setTokenForm(prev => ({ ...prev, [name]: value }));\n//     else setUserForm(prev => ({ ...prev, [name]: value }));\n//     setErrors((prev:any) => ({ ...prev, [name]: undefined }));\n//   };\n\n//   const copyToClipboard = (value: string, field: string) => {\n//     navigator.clipboard.writeText(value).then(() => setCopiedField(field));\n//   };\n\n//   const handleSubmit = async (e: FormEvent) => {\n//     e.preventDefault();\n//     setLoading(true);\n//     setWidgetError(null);\n\n//     if (step === \"token\") {\n//       if (!tokenForm.client_id || !tokenForm.client_secret) {\n//         setErrors({\n//           client_id: !tokenForm.client_id ? \"Client ID is required\" : undefined,\n//           client_secret: !tokenForm.client_secret ? \"Client Secret is required\" : undefined,\n//         });\n//         setLoading(false);\n//         return;\n//       }\n//       try {\n//         const res = await getAccessToken(tokenForm.client_id,tokenForm.client_secret)\n//         if (res) {\n//           setAccessToken(res.access_token);\n//           setStep(\"user\");\n//         } \n//         // else setWidgetError(res.error || \"Token fetch failed\");\n//       } catch {\n//         setWidgetError(\"Error fetching token\");\n//       } finally {\n//         setLoading(false);\n//       }\n//     } else if (step === \"user\") {\n//       if (!userForm.username || !userForm.email || !userForm.plaid_user_id) {\n//         setErrors({\n//           username: !userForm.username ? \"Username is required\" : undefined,\n//           email: !userForm.email ? \"Email is required\" : undefined,\n//           plaid_user_id: !userForm.plaid_user_id ? \"Plaid User ID is required\" : undefined,\n//         });\n//         setLoading(false);\n//         return;\n//       }\n//       try {\n//         const res = await createUser({email:userForm.email,username:userForm.username,plaid_user_id:userForm.plaid_user_id},accessToken)\n//         const data = res\n//         console.log(data,\"9087689\")\n//         if (res) {\n//           setUserId(data.user_id);\n//           setStep(\"session\");\n//         } else setWidgetError(data.error || \"User creation failed\");\n//       } catch {\n//         setWidgetError(\"Error creating user\");\n//       } finally {\n//         setLoading(false);\n//       }\n//     } else if (step === \"session\") {\n//       try {\n//         console.log(userId,\"userId\")\n//         const data = await makeSessionToken(userId,accessToken)\n//         // const data = res;\n//         if (data) {\n//           setSessionToken(data.widget_session_token);\n//           setStep(\"widget\");\n//           setShowClientAuthForm(true);\n//         } else {\n//           setErrors({ session: data.error || \"Session creation failed\" });\n//         }\n//       } catch {\n//         setErrors({ session: \"Error creating session\" });\n//       } finally {\n//         setLoading(false);\n//       }\n//     }\n//   };\n\n//   useEffect(() => {\n//     if (!showClientAuthForm) {\n//       document.getElementById(\"widget-script\")?.remove();\n//       document.getElementById(\"widget-style\")?.remove();\n//       document.getElementById(\"widget-container\")?.remove();\n//       return;\n//     }\n//     if (document.getElementById(\"widget-script\")) return;\n\n//     const script = document.createElement(\"script\");\n//     script.type = \"module\";\n//     script.id = \"widget-script\";\n//     script.src = \"http://localhost:5173/widgets/widgetLauncher.js\";\n//     script.async = true;\n//     script.setAttribute(\"data-userid\", userId);\n//     script.setAttribute(\"data-access_token\", accessToken);\n//     script.setAttribute(\"data-session_token\", sessionToken);\n//     document.body.appendChild(script);\n\n//     const link = document.createElement(\"link\");\n//     link.rel = \"stylesheet\";\n//     link.id = \"widget-style\";\n//     link.href = \"http://localhost:5173/widgets/style.css\";\n//     document.head.appendChild(link);\n\n//     return () => {\n//       script.remove();\n//       link.remove();\n//       document.getElementById(\"widget-container\")?.remove();\n//     };\n//   }, [showClientAuthForm, userId, accessToken, sessionToken]);\n\n//   return (\n//     <div className=\"auth-form-container\">\n//       <form onSubmit={handleSubmit} className=\"auth-form\">\n//         {step === \"token\" && (\n//           <>\n//             <h2>Step 1: Get Access Token</h2>\n//             <input name=\"client_id\" placeholder=\"Client ID\" value={tokenForm.client_id} onChange={handleTokenOrUserChange} />\n//             {errors.client_id && <p className=\"error\">{errors.client_id}</p>}\n//             <input name=\"client_secret\" placeholder=\"Client Secret\" value={tokenForm.client_secret} onChange={handleTokenOrUserChange} />\n//             {errors.client_secret && <p className=\"error\">{errors.client_secret}</p>}\n//           </>\n//         )}\n\n//         {step === \"user\" && (\n//           <>\n//             <h2>Step 2: Create User</h2>\n//             <input name=\"username\" placeholder=\"Username\" value={userForm.username} onChange={handleTokenOrUserChange} />\n//             {errors.username && <p className=\"error\">{errors.username}</p>}\n//             <input name=\"email\" placeholder=\"Email\" value={userForm.email} onChange={handleTokenOrUserChange} />\n//             {errors.email && <p className=\"error\">{errors.email}</p>}\n//             <input name=\"plaid_user_id\" placeholder=\"Plaid User ID\" value={userForm.plaid_user_id} onChange={handleTokenOrUserChange} />\n//             {errors.plaid_user_id && <p className=\"error\">{errors.plaid_user_id}</p>}\n//           </>\n//         )}\n\n//         {step === \"session\" && (\n//           <>\n//             <h2>Step 3: Session Created</h2>\n//             <div className=\"info-box\">\n//               <p><strong>User ID:</strong> {userId}</p>\n//               <p><strong>Access Token:</strong> {accessToken}</p>\n//               <p><strong>Session Token:</strong> {sessionToken}</p>\n//               {errors.session && <p className=\"error\">{errors.session}</p>}\n//             </div>\n//           </>\n//         )}\n\n//         {step === \"widget\" && (\n//           <div className=\"widget-loaded-message\">\n//             <h2>Widget Loaded Successfully</h2>\n//             <p>The widget should now be visible on the page.</p>\n//           </div>\n//         )}\n\n//         {step !== \"widget\" && (\n//           <button type=\"submit\" className=\"submit-btn\" disabled={loading}>\n//             {loading ? \"Processing...\" : step === \"session\" ? \"Continue to Widget\" : `Continue to ${step === \"token\" ? \"User Creation\" : \"Session\"}`}\n//           </button>\n//         )}\n//       </form>\n//     </div>\n//   );\n// }\n\n\n\n// import React, { useEffect, useState } from \"react\";\n\n// interface Props {\n//   userId: string;\n//   access_token: string;\n//   session_token: string;\n//   onError?: (msg: string) => void;\n// }\n\n// const PotentialDeductions = () => {\n//   const [transactions, setTransactions] = useState<any[]>([]);\n//   const [activeCategoryIndex, setActiveCategoryIndex] = useState<number>(0);\n//   const [isOpen, setIsOpen] = useState(false);\n//   const [loading, setLoading] = useState(false);\n//   const [error, setError] = useState(\"\");\n\n\n\n//   const groupByField = (dataArray: any, groupKey: any) => {\n//     if (!Array.isArray(dataArray)) {\n//       throw new Error(\"First argument must be an array\");\n//     }\n\n//     const grouped: any = [];\n\n//     dataArray.forEach((item) => {\n//       const key = item[groupKey] || \"schedule C\";\n//       if (!grouped[key]) {\n//         grouped[key] = [];\n//       }\n//       grouped[key].push(item);\n//     });\n\n//     return grouped;\n//   }\n\n//   const fetchTransactions = async (userId: string) => {\n//     setLoading(true);\n//     try {\n//       const data: any = await fetch(`https://dev-categorization.musetax.com/v2/api/potential-deductions/${userId}`, {\n//         method: \"GET\",\n\n//       }).then(async (data) => {\n//         const data1 = await data.json();\n//         const scheduleData = groupByField(data1.deductions, data1.deductions[0].schedule || 'schedule c')\n//         console.log(scheduleData, \"scheduleData\");\n\n//         setTransactions(scheduleData);\n//         console.log(data1,\n//           'dshjchduv'\n//         )\n\n//       })\n\n//       const raja = await data.json()\n//       const response = data.data.json()\n//       console.log(response, \"wuhdwuk\", raja)\n//       // setTransactions(data.body || []);\n//       // if (data?.detail) {\n//       //   const msg = data.detail;\n//       //   setError(msg);\n//       //   // onError?.(msg);\n//       //  } else {\n\n//       //   setTransactions(data || []);\n//       // }\n//     } catch (error: any) {\n//       const msg = \"Failed to fetch transactions.\";\n//       // setError(msg);\n//       // onError?.(msg);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n//   useEffect(() => {\n//     fetchTransactions('68624589068ff5fea74cf7be')\n//   }, [])\n//   const objectKey:any=Object.keys(transactions)\n//   const activeDeductions = transactions[objectKey[activeCategoryIndex]];\n//   console.log(activeDeductions, \"transactionstransactions\");\n//   let total = 0;\n//  let savings = 0;\n//  if(activeDeductions)   \n// {activeDeductions.forEach((d: any) => {\n//   console.log(d);\n\n//   total += d.total_amount || 0;\n//   savings += d.potential_deduction || 0;\n// });}\n\n\n//   const label = (total - savings).toFixed(2);\n\n//   return (\n//     <>\n//       <div\n//         style={{\n//           position: \"fixed\",\n//           bottom: \"20px\",\n//           right: \"20px\",\n//           width: \"60px\",\n//           height: \"60px\",\n//           backgroundColor: \"#007bff\",\n//           borderRadius: \"50%\",\n//           display: \"flex\",\n//           justifyContent: \"center\",\n//           alignItems: \"center\",\n//           cursor: \"pointer\",\n//           zIndex: 9999,\n//           color: \"#fff\",\n//           fontSize: \"28px\",\n//           boxShadow: \"0 4px 5px rgba(0, 0, 0, 0.3)\",\n//         }}\n//         onClick={() => setIsOpen(!isOpen)}\n//         title=\"Open Auth Widget\"\n//       >\n//         ðŸ’¬\n//       </div>\n\n//       {isOpen && (\n//         <div\n//           style={{\n//             position: \"fixed\",\n//             bottom: \"90px\",\n//             right: \"20px\",\n//             width: \"68rem\",\n//             maxHeight: \"70vh\",\n//             zIndex: 9998,\n//             overflowY: \"auto\",\n//           }}\n//         >\n//           {error ? (\n//             <div\n//               style={{\n//                 paddingTop: \"200px\",\n//                 minHeight: \"500px\",\n//               }}\n//             >\n//               ''\n//               <p>{error}</p>\n//             </div>\n//           ) : (\n//             <div\n//               style={{\n//                 maxWidth: 1200,\n//                 margin: \"auto\",\n//                 border: \"1px solid #ccc\",\n//                 borderRadius: 16,\n//                 overflow: \"hidden\",\n//               }}\n//             >\n//               <div\n//                 style={{\n//                   backgroundColor: \"#F1F7FB\",\n//                   padding: \"16px 24px\",\n//                   display: \"flex\",\n//                   justifyContent: \"space-between\",\n//                   alignItems: \"center\",\n//                   borderBottom: \"1px solid #BFDBFE\",\n//                 }}\n//               >\n//                 <h2\n//                   style={{\n//                     fontSize: 20,\n//                     fontWeight: 500,\n//                     color: \"#042567\",\n//                     margin: 0,\n//                   }}\n//                 >\n//                   Potential Deductions Analysis\n//                 </h2>\n//                 <span\n//                   style={{\n//                     fontSize: 14,\n//                     color: \"#6B7280\",\n//                     display: \"flex\",\n//                     alignItems: \"center\",\n//                     gap: 4,\n//                   }}\n//                 >\n//                   <span\n//                     style={{\n//                       width: 8,\n//                       height: 8,\n//                       borderRadius: \"50%\",\n//                       backgroundColor: \"#687DF7\",\n//                       display: \"inline-block\",\n//                     }}\n//                   />\n//                   Analysis complete\n//                 </span>\n//               </div>\n\n//               {loading ? (\n//                 <p\n//                   style={{\n//                     fontSize: \"0.875rem\",\n//                     color: \"#526282\",\n//                     margin: 0,\n//                     display: \"flex\",\n//                     justifyContent: \"center\",\n//                     width: \"100%\",\n//                   }}\n//                 >\n//                   Loadingâ€¦\n//                 </p>\n//               ) : (\n//                 <div style={{ padding: 24 }}>\n//                   {/* Tabs */}\n//                   <div style={{ marginBottom: 24, display: \"flex\", gap: 8 }}>\n//                     {Object.keys(transactions).map((cat, index) => (\n//                       <button\n//                         key={index}\n//                         onClick={() => setActiveCategoryIndex(index)}\n//                         style={{\n//                           border: \"1px solid #5387F1\",\n//                           padding: \"12px 16px\",\n//                           fontSize: 14,\n//                           fontWeight: 500,\n//                           borderRadius: 8,\n//                           backgroundColor:\n//                             activeCategoryIndex === index ? \"#5387F1\" : \"white\",\n//                           color:\n//                             activeCategoryIndex === index ? \"white\" : \"#5387F1\",\n//                           cursor: \"pointer\",\n//                         }}\n//                       >\n//                         {cat}\n//                       </button>\n//                     ))}\n//                   </div>\n\n//                   {/* Deduction Details */}\n//                   {activeDeductions.map((activeDeduction: any) => (<>\n//                     <div\n//                       style={{\n//                         border: \"1px solid rgba(30, 64, 175, 0.1)\",\n//                         borderRadius: 16,\n//                         padding: 16,\n//                         margin: \"12px 0\",\n//                       }}\n//                     >\n//                       <h3 style={{ marginBottom: 8, color: \"#042567\" }}>\n//                         {activeDeduction?.title}\n//                       </h3>\n//                       <p style={{ color: \"#526282\", marginBottom: 4 }}>\n//                         {activeDeduction?.description}\n//                       </p>\n//                       <p style={{ color: \"#5A83F3\", fontSize: 12 }}>\n//                         Debit transactions:{\" \"}\n//                         {activeDeduction?.debit_transaction_count}, Credit\n//                         transactions: {activeDeduction?.credit_transaction_count}\n//                       </p>\n//                       <div\n//                         style={{\n//                           marginTop: 16,\n//                           display: \"flex\",\n//                           justifyContent: \"space-between\",\n//                         }}\n//                       >\n//                         <div style={{ fontWeight: 500, color: \"#5A83F3\" }}>\n//                           Total Spent: ${activeDeduction?.total_amount}\n//                         </div>\n//                         <div style={{ fontWeight: 500, color: \"#5387F1\" }}>\n//                           Potential Deduction: $\n//                           {activeDeduction?.potential_deduction}\n//                         </div>\n//                       </div>\n//                     </div>\n//                   </>))}\n\n//                   {/* Individual Transactions (Optional) */}\n//                   <div>\n//                     {/* {activeDeductions?.map((txn: any, i: any) => ( */}\n//                       <div\n//                         // key={i}\n//                         style={{\n//                           borderBottom: \"1px solid #eee\",\n//                           padding: \"12px 0\",\n//                         }}\n//                       >\n//                         <div style={{ fontWeight: 500 }}>\n//                           Total potenial deduction: $${savings}\n//                         </div>\n//                         <div style={{ fontSize: 12, color: \"#666\" }}>\n//                          Total amount: $${total}\n//                         </div>\n//                       </div>\n//                     {/* ))} */}\n//                   </div>\n//                 </div>\n//               )}\n//             </div>\n//           )}\n//         </div>\n//       )}\n//     </>\n//   );\n// };\n\n// export default PotentialDeductions;\n\nimport React, { useState } from \"react\";\n\n export default function AuthForm(){\n  const [showIframe, setShowIframe] = useState(false);\n\n  const handleClick = () => {\n    setShowIframe(true);\n  };\n\n  return (\n    <div>\n      <button\n        onClick={handleClick}\n        className=\"px-4 py-2 bg-blue-500 text-white rounded\"\n      >\n        Open Iframe\n      </button>\n\n      {showIframe && (\n        <iframe\n          src=\"http://localhost:3000/\"\n          width=\"20\"\n          height=\"680\"\n          style={{ border: \"none\", overflow: \"hidden\" }}\n          allow=\"clipboard-write; microphone; camera\"\n          title=\"My Iframe\"\n        />\n      )}\n    </div>\n  );\n};\n\n"],"mappings":";;AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvC,eAAe,SAASC,QAAQA,CAAA,EAAE;EAAAC,EAAA;EACjC,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGN,QAAQ,CAAC,KAAK,CAAC;EAEnD,MAAMO,WAAW,GAAGA,CAAA,KAAM;IACxBD,aAAa,CAAC,IAAI,CAAC;EACrB,CAAC;EAED,oBACEJ,OAAA;IAAAM,QAAA,gBACEN,OAAA;MACEO,OAAO,EAAEF,WAAY;MACrBG,SAAS,EAAC,0CAA0C;MAAAF,QAAA,EACrD;IAED;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EAERT,UAAU,iBACTH,OAAA;MACEa,GAAG,EAAC,wBAAwB;MAC5BC,KAAK,EAAC,IAAI;MACVC,MAAM,EAAC,KAAK;MACZC,KAAK,EAAE;QAAEC,MAAM,EAAE,MAAM;QAAEC,QAAQ,EAAE;MAAS,CAAE;MAC9CC,KAAK,EAAC,qCAAqC;MAC3CC,KAAK,EAAC;IAAW;MAAAX,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClB,CACF;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAACV,EAAA,CA5BwBD,QAAQ;AAAAoB,EAAA,GAARpB,QAAQ;AA4BhC;AAAC,IAAAoB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}