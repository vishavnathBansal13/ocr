// api.ts
import axios from "axios";
import { toast } from "react-toastify";
const API_BASE_URL = "https://dev-categorization.musetax.com";
// Create Axios instance
const api = axios.create({
    baseURL: API_BASE_URL,
    headers: {
        Accept: "application/json",
        "Content-Type": "application/json",
    },
});
// Response interceptor for centralized error handling
api.interceptors.response.use((response) => response, (error) => {
    var _a, _b;
    const status = (_a = error === null || error === void 0 ? void 0 : error.response) === null || _a === void 0 ? void 0 : _a.status;
    if (status === 401) {
        console.warn("Unauthorized (401) - refreshing page...");
        toast.error("Token Expired.", { toastId: "Token Expired." });
        window.location.reload(); // reload the page
    }
    console.error("API error:", ((_b = error === null || error === void 0 ? void 0 : error.response) === null || _b === void 0 ? void 0 : _b.data) || error.message);
    return Promise.reject(error);
});
export default api;
